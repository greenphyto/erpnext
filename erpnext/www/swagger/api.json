{
  "openapi": "3.0.2",
  "info": {
    "title": "Swagger ERP API enpoint for FOMS",
    "description": "this is to inetgrating between ERP Controller from FOMS action",
    "termsOfService": "http://greenphyto.com/",
    "contact": {
      "email": "support@greenphyto.com"
    },
    "license": {
      "name": "Apache 2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
    },
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "/api/method/"
    }
  ],
  "paths": {
    "/login": {
      "post": {
        "summary": "Login User",
        "description": "Login to user",
        "security": [
          {
            "BasicAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "usr": {
                    "type": "string"
                  },
                  "pwd": {
                    "type": "string"
                  }
                },
                "example": {
                  "usr": "administrator",
                  "pwd": "admin"
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Login successful"
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Wrong username/password"
          }
        }
      }
    },
    "/erpnext.controllers.erp_api.ping_data": {
      "post": {
        "summary": "To test push data dummy",
        "description": "-",
        "operationId": "test push data",
        "requestBody": {
          "description": "Test push data",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "data": {
                    "type": "object"
                  }
                },
                "example": {
                  "data": {
                    "data1": "100",
                    "data2": "200"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful operation"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      }
    },
    "/erpnext.controllers.erp_api.create_bom": {
      "post": {
        "summary": "Create new Bill of Material (BOM) from recipe FOMS",
        "description": "-",
        "operationId": "create new BOM",
        "requestBody": {
          "description": "Use data request as data returned from FOMS <b>GetRecipeByProductId</b>",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "data": {
                    "type": "object"
                  }
                },
                "example": {
                  "data": {
                    "productID": "37",
                    "productVersionName": "V1.6",
                    "process": [
                      {
                        "processName": "Seeding",
                        "productRawMaterial": [
                          {
                            "rawMaterialId": 38,
                            "rawMaterialRefNo": "RM-IN-WW",
                            "rawMaterialName": "Water",
                            "uomrm": "L",
                            "uomProduct": "Per Tray",
                            "qtyrm": 36.0
                          },
                          {
                            "rawMaterialId": 39,
                            "rawMaterialRefNo": "RM-MS-SP",
                            "rawMaterialName": "Sponge",
                            "uomrm": "unit",
                            "uomProduct": "Per Tray",
                            "qtyrm": 180.0
                          },
                          {
                            "rawMaterialId": 40,
                            "rawMaterialRefNo": "RM-NS-NSA",
                            "rawMaterialName": "Nutrient A",
                            "uomrm": "ml",
                            "uomProduct": "Per Tray",
                            "qtyrm": 180.0
                          },
                          {
                            "rawMaterialId": 41,
                            "rawMaterialRefNo": "RM-NS-NSB",
                            "rawMaterialName": "Nutrient B",
                            "uomrm": "ml",
                            "uomProduct": "Per Tray",
                            "qtyrm": 180.0
                          },
                          {
                            "rawMaterialId": 57,
                            "rawMaterialRefNo": "RM-SD-SPC",
                            "rawMaterialName": "Small Size Pak Choy Seeds",
                            "uomrm": "g",
                            "uomProduct": "Per Tray",
                            "qtyrm": 0.75
                          }
                        ],
                        "productTask": [
                          {
                            "taskID": "T-0289",
                            "taskSequence": 1,
                            "taskName": "Check in RM & Equipment",
                            "details": "Check in all the required RM",
                            "taskType": "Check in Raw Materials/Equipment"
                          },
                          {
                            "taskID": "T-0290",
                            "taskSequence": 2,
                            "taskName": "Get location from ASRS",
                            "details": "Location obtained from ASRS",
                            "taskType": "ASRS Storage"
                          }
                        ]
                      }
                    ]
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": {
                      "bomId": "BOM-PR-AV-KL-0001"
                    }
                  }
                }
              }
            }
          },
          "405": {
            "description": "Invalid input"
          }
        }
      }
    },
    "/erpnext.controllers.erp_api.create_work_order": {
      "post": {
        "summary": "Create new Work Order in ERP",
        "description": "-",
        "operationId": "create new Work Order",
        "requestBody": {
          "description": "Create new Work Order in ERP",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "data": {
                    "type": "object"
                  }
                },
                "example": {
                  "workOrderID": "FOMS-001",
                  "lotID": "LOT12",
                  "productID": "37",
                  "qty": 2,
                  "uom": "Kg"
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": {
                      "workOrderId": "workOrderName"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Invalid input"
          }
        }
      }
    },
    "/erpnext.controllers.erp_api.update_work_order_operation_status": {
      "post": {
        "summary": "Update current Work Order status based on FOMS Process",
        "description": "This endpoint is used to update operation process start/end information. So ERPNext can initiate job card, stock entry, start, and end job card logic based on the provided data. Completion of job card logic depends on FOMS's operation process start and end statuses",
        "operationId": "update Work Order status",
        "requestBody": {
          "description": "Update Work Order Status",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "data": {
                    "type": "object"
                  }
                },
                "example": {
                  "workOrderID": "FOMS-001",
                  "lotID": "LOT12",
                  "operationName":"Seeding",
                  "percentage": 10
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": true
                  }
                }
              }
            }
          },
          "404": {
            "description": "Invalid input"
          }
        }
      }
    },
    "/erpnext.controllers.erp_api.submit_work_order_finish_goods": {
      "post": {
        "summary": "Submit Finish Goods and completing Work Order",
        "description": "This endpoint updates the finished goods quantity from FOMS to ERPNext. It is triggered when the Operation module updates confirmed finished goods quantity",
        "operationId": "submit finish goods",
        "requestBody": {
          "description": "Submit Finish Goods",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "data": {
                    "type": "object"
                  }
                },
                "example": {
                  "workOrderID": "FOMS-001",
                  "lotID": "LOT12",
                  "qty": 1
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": {
                      "stockEntry":"stockEntryName"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Invalid input"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {}
  },
  "security": [
    {
      "BasicAuth": []
    }
  ],
  "securityDefinitions": {
    "BasicAuth": {
      "type": "basic"
    }
  }
}